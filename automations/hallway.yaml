- id: bookshelf_lights_on_off
  alias: Bookshelf Lights - On & Off
  use_blueprint:
    path: samuelkadolph/automaton.yaml
    input:
      first_elevation_helper: input_number.outside_lights_on_sun_elevation
      first_conditions:
      - '{{ int(states("zone.home")) > 0 }}'
      first_actions:
      - action: light.turn_on
        target: { entity_id: light.bookshelf_lights }
      second_time_helper: input_datetime.bookshelf_lights_off_time
      second_actions:
      - action: light.turn_off
        target: { entity_id: light.bookshelf_lights }

- id: bookshelf_lights_on_w_arrival
  alias: Bookshelf Lights - On w/ Arrival
  mode: single
  triggers:
  - trigger: state
    entity_id: zone.home
    from: '0'
  conditions:
  - condition: time
    before: input_datetime.bookshelf_lights_off_time
    after: '12:00:00'
  - '{{ trigger.from_state and trigger.to_state and (int(trigger.from_state.state) < int(trigger.to_state.state)) }}'
  - '{{ state_attr("sun.sun", "elevation") < float(states("input_number.outside_lights_on_sun_elevation")) }}'
  actions:
  - action: light.turn_on
    target: { entity_id: light.bookshelf_lights }

- id: nook_scene_switch_single_bookshelf_lights
  alias: Nook Scene Switch (Single) - Bookshelf Lights
  use_blueprint:
    path: samuelkadolph/zwave_switch_lights.yaml
    input:
      up_event: &nook_scene_switch_up event.nook_scene_switch_scene_001
      down_event: &nook_scene_switch_down event.nook_scene_switch_scene_002
      double_tap: true
      paddle_hold: true
      subjects: light.bookshelf_lights

- id: nook_scene_switch_triple_nook_shade
  alias: Nook Scene Switch (Triple) - Nook Shade
  use_blueprint:
    path: samuelkadolph/zwave_switch_covers.yaml
    input:
      up_event: *nook_scene_switch_up
      down_event: *nook_scene_switch_down
      paddle_taps: KeyPressed3x
      covers: cover.nook_shade
      state_variable: input_number.nook_shade_control_state

- id: nook_shade_close_open
  alias: Nook Shade - Close & Open
  use_blueprint:
    path: samuelkadolph/automaton.yaml
    input:
      first_elevation_helper: input_number.shades_close_sun_elevation
      first_actions:
      - action: script.nook_close_shade
      second_time_helper: sensor.shades_open_time
      second_actions:
      - action: cover.open_cover
        target: { entity_id: cover.nook_shade }
