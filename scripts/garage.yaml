garage_close_door:
  alias: Garage - Close Door
  icon: mdi:garage-variant
  mode: single
  sequence:
  - action: cover.close_cover
    target: { entity_id: cover.garage_door }

garage_open_door:
  alias: Garage - Open Door
  icon: mdi:garage-open-variant
  mode: single
  sequence:
  - action: cover.open_cover
    target: { entity_id: cover.garage_door }

garage_turn_off:
  alias: Garage - Turn Off
  icon: mdi:power-off
  mode: single
  sequence:
  - parallel:
    - action: script.midea_turn_off
      data: { target: { entity_id: climate.garage_air } }
    - action: homeassistant.turn_off
      target:
        entity_id:
        - fan.garage_fan
        - fan.garage_filter
        - light.garage_lights
        - switch.air_compressor
        - switch.garage_speakers

garage_turn_on:
  alias: Garage - Turn On
  icon: mdi:power-on
  mode: single
  sequence:
  - parallel:
    - choose:
      - conditions:
        - '{{ float(states("sensor.garage_air_indoor_temperature")) <= float(states("input_number.garage_air_heat_threshold")) }}'
        - '{{ float(states("sensor.garage_sensor_air_temperature")) <= float(states("input_number.garage_air_heat_threshold")) }}'
        sequence:
        - action: script.midea_set_temperature
          data:
            data: { hvac_mode: heat, temperature: '{{ states("input_number.garage_air_heat_temperature") }}' }
            target: { entity_id: climate.garage_air }
        - action: fan.turn_on
          target: { entity_id: fan.garage_fan }
        - delay: { seconds: 10 }
        - action: script.midea_set_preset_mode
          data:
            data: { preset_mode: boost }
            target: { entity_id: climate.garage_air }
      - conditions:
        - '{{ float(states("sensor.garage_air_indoor_temperature")) >= float(states("input_number.garage_air_cool_threshold")) }}'
        - '{{ float(states("sensor.garage_sensor_air_temperature")) >= float(states("input_number.garage_air_cool_threshold")) }}'
        sequence:
        - action: script.midea_set_temperature
          data:
            data: { hvac_mode: cool, temperature: '{{ states("input_number.garage_air_cool_temperature") }}' }
            target: { entity_id: climate.garage_air }
        - action: fan.turn_on
          target: { entity_id: fan.garage_fan }
        - delay: { seconds: 10 }
        - action: script.midea_set_preset_mode
          data:
            data: { preset_mode: boost }
            target: { entity_id: climate.garage_air }
